!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.zliq=t():e.zliq=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);Object.keys(r).forEach(function(e){"default"===e||"__esModule"===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n(3);Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var u=n(10);Object.keys(u).forEach(function(e){"default"===e||"__esModule"===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var i=n(9);Object.keys(i).forEach(function(e){"default"===e||"__esModule"===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var c=n(8);Object.keys(c).forEach(function(e){"default"===e||"__esModule"===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})})},function(e,t,n){"use strict";function r(e,t){return!(0,S.default)(e,t)}function o(e,t){e.value=t,u(e.listeners,t)}function u(e,t){e.forEach(function(e){e(t)})}function i(e,t){var n=void 0===e.value?void 0:t(e.value);return O(n)}function c(e,t){var n=i(e,t);return e.listeners.push(function(e){n(t(e))}),n}function a(e,t){function n(e,t,n){var r=e(t);return r.listeners.push(n),r}var r,o=function(e){u(e)},u=i(e,function(e){return r=n(t,e,o),r.value});return e.listeners.push(function(e){r&&g(r.listeners,o),r=n(t,e,o),u(r.value)}),u}function l(e,t){var n=i(e,function(e){return t(e)?e:void 0});return e.listeners.push(function(e){t(e)&&n(e)}),n}function f(e,t){function n(e,t){return t.reduce(function(e,t){return e[t]},e)}var r=t.split("."),o=i(e,function(e){return n(e,r)});return e.listeners.push(function(e){o(n(e,r))}),o}function s(e,t){return Array.isArray(t)?h(t.map(function(t){return f(e,t)})):f(e,t)}function d(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e,t){return r(e,t)},n=i(e,function(e){return e});return e.listeners.push(function(e){t(n.value,e)&&n(e)}),n}function p(e,t){return null==e.value?void e(t):e(Object.assign({},e.value,t))}function v(e,t){var n=O(t.value?void 0:e.value),r=function(t){n(e.value),t.listeners.push(n)};return t.map(function(t){t?g(e.listeners,n):r(e)}),n}function y(e,t,n){function r(){o=t(o,e.value),u(o)}var o=n,u=O();return void 0!==e.value&&r(e.value),e.listeners.push(r),u}function m(e,t){function n(e){r&&window.clearTimeout(r),r=setTimeout(function(){o(e),r=null},t)}var r,o=O();return void 0!==e.value&&n(e.value),e.listeners.push(n),o}function h(e){var t=e.map(function(e){return e&&e.IS_STREAM?e.value:e}),n=O(-1===t.indexOf(void 0)?t:void 0);return e.forEach(function(e,r){e.IS_STREAM&&e.listeners.push(function(e){t[r]=e,n(-1===t.indexOf(void 0)?t:void 0)})}),n}function b(e){return null!=e&&!!e.IS_STREAM}function g(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}Object.defineProperty(t,"__esModule",{value:!0}),t.stream=void 0,t.merge$=h,t.isStream=b;var j=n(5),S=function(e){return e&&e.__esModule?e:{default:e}}(j),O=t.stream=function(e){var t=function(e){return void 0===e?t.value:(o(t,e),t)};return t.IS_STREAM=!0,t.value=e,t.listeners=[],t.map=function(e){return c(t,e)},t.is=function(e){return c(t,function(t){return t===e})},t.flatMap=function(e){return a(t,e)},t.filter=function(e){return l(t,e)},t.deepSelect=function(e){return f(t,e)},t.distinct=function(e){return d(t,e)},t.$=function(e){return s(t,e)},t.until=function(e){return v(t,e)},t.patch=function(e){return p(t,e)},t.reduce=function(e,n){return y(t,e,n)},t.debounce=function(e){return m(t,e)},t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);Object.keys(r).forEach(function(e){"default"===e||"__esModule"===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n(4);Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})},function(e,t,n){"use strict";function r(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:10;return e.debounce(n).reduce(function(e,n){var r=e.element,u=e.version,i=e.children,c=e.keyContainer,a=n.tag,l=n.props,f=n.children,s=n.version;null===r&&(r=y(a,f),t&&t.appendChild(r));var d=o(r,a,l,f,s,i,u,c);return t&&0===s&&h(r,l,"mounted"),{element:d,version:s,children:m(f),keyContainer:c}},{element:null,version:-1,children:[],keyContainer:{}})}function o(e,t,n,r,o,c,a,l){var f=e;return f=n&&n.id?u(e,t,n,r,o,l):i(e,t,n,r,o,c,a,l),0===o&&h(f,n,"created"),0<o&&h(f,n,"updated"),f}function u(e,t,n,r,o,u){var i=n.id;void 0===u[i]&&(u[i]={element:document.createElement(t),vdom:{tag:t,props:{},children:[]}});var c=u[i];return o!==c.version&&(f(c.element,n),p(c.element,r,c.vdom.children,u),c.version=o,c.vdom.props=n,c.vdom.children=r),e!==c.element&&(e.parentElement.replaceChild(c.element,e),h(c.element,n,"mounted")),c.element}function i(e,t,n,r,o,u,i,c){if(g(e)&&t===w)return j(e,r[0]),e;if(S(e,n,t)){var a=y(t,r);e.parentElement.replaceChild(a,e),e=a,u=[]}return f(e,n),t!==w&&p(e,r,u,c),e}function c(e,t,n){for(var r,o=e.childNodes.length;o>t.length;o--){if(r=e.childNodes[o-1],e.removeChild(r),n.length<o){console.log("ZLIQ: Something other then ZLIQ has manipulated the children of the element",e,". This can lead to sideffects. Please check your code.");continue}h(r,n[o-1].props,"removed")}}function a(e,t,n,r){for(var u=e.childNodes,i=0;i<u.length&&i<t.length;i++){var c=u[i],a=n[i],l=a.version,f=a.children,s=t[i];o(c,s.tag,s.props,s.children,s.version,f,l,r)}}function l(e,t,n){for(var r=e.childNodes.length;r<t.length;r++){var u=t[r],i=u.tag,c=u.props,a=u.children,l=u.version,f=y(i,a);e.appendChild(f),o(f,i,c,a,l,[],-1,n),c&&c.cycle&&c.cycle.mounted&&console.error("The 'mounted' lifecycle event is only called on elements with id. As elements are updated in place, it is hard to define when a normal element is mounted.")}}function f(e,t){void 0!==t&&(Object.getOwnPropertyNames(t).map(function(n){s(e,n,t[n])}),d(e,t))}function s(e,t,n){"class"===t||"className"===t?e.className=n:"style"===t&&"string"!=typeof n?Object.assign(e.style,n):e[t]=null===n?void 0:n}function d(e,t){if(void 0!==e.props)for(var n in e.props)void 0===t[n]&&e.removeAttribute(n)}function p(e,t,n,r){if(0!==t.length||0!==n.length){var o=(e.childNodes,v(t));a(e,o,v(n),r),c(e,o,n),l(e,o,r)}}function v(e){return e.map(function(e){return(0,_.isStream)(e)||void 0!==e.tag?e:{tag:w,children:[e],version:0}})}function y(e,t){return e===w?document.createTextNode(t[0]):document.createElement(e)}function m(e){if(void 0===e)return[];var t=JSON.parse(JSON.stringify(e));return t.forEach(function(t,n){var r=e[n];r.props&&r.props.cycle&&(t.cycle=r.props.cycle),"object"===O(e[n])&&(t.children=m(r.children))}),t}function h(e,t,n){t&&t.cycle&&t.cycle[n]&&t.cycle[n](e)}function b(e,t){return e.nodeName.toLowerCase()!==t}function g(e){return e instanceof window.Text}function j(e,t){e.nodeValue!==t&&(e.nodeValue=t)}function S(e,t,n){return""===e.id&&b(e,n)}var O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.render=r,t.diff=o,t.createNode=y;var _=n(1),w="#text"},function(e,t,n){"use strict";function r(e,t,n){var r=document.createElement("div");return o((0,i.render)(e,r,0),t,n)}function o(e,t,n){return e.reduce(function(e,r){if(void 0===t[e])throw new Error("Unexpected Update!");return u(t,e,r,n),t.length===e+1&&n&&n(),e+1},0)}function u(e,t,n,r){setTimeout(function(){try{e[t](n)}catch(e){r.fail(e)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.testRender=r,t.test$=o;var i=n(2)},function(e,t,n){"use strict";function r(e){return null===e||void 0===e}function o(e){return e&&"object"===(void 0===e?"undefined":i(e))&&"number"==typeof e.length&&"function"==typeof e.copy&&"function"==typeof e.slice&&!(0<e.length&&"number"!=typeof e[0])}function u(e,t,n){var u,s;if(r(e)||r(t))return!1;if(e.prototype!==t.prototype)return!1;if(l(e))return!!l(t)&&(e=c.call(e),t=c.call(t),f(e,t,n));if(o(e)){if(!o(t))return!1;if(e.length!==t.length)return!1;for(u=0;u<e.length;u++)if(e[u]!==t[u])return!1;return!0}try{var d=a(e),p=a(t)}catch(e){return!1}if(d.length!=p.length)return!1;for(d.sort(),p.sort(),u=d.length-1;0<=u;u--)if(d[u]!=p[u])return!1;for(u=d.length-1;0<=u;u--)if(s=d[u],!f(e[s],t[s],n))return!1;return(void 0===e?"undefined":i(e))===(void 0===t?"undefined":i(t))}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=Array.prototype.slice,a=n(7),l=n(6),f=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e&&t&&("object"==(void 0===e?"undefined":i(e))||"object"==(void 0===t?"undefined":i(t)))?u(e,t,n):n.strict?e===t:e==t)}},function(e,t,n){"use strict";function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function o(e){return e&&"object"==(void 0===e?"undefined":u(e))&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();t=e.exports=i?r:o,t.supported=r,t.unsupported=o},function(e,t,n){"use strict";function r(e){var t=[];for(var n in e)t.push(n);return t}t=e.exports="function"==typeof Object.keys?Object.keys:r,t.shim=r},function(e,t,n){"use strict";function r(e){if(window.onpopstate=function(t){if(t.state){var n=t.state,r=n.route,o=n.query;a(e,r,o)}},document.addEventListener("click",function(t){var n=t.target||t.srcElement;if("A"===n.tagName){var r=n.getAttribute("href"),o=null!=r&&r.startsWith("/"),u=null!=r&&r.startsWith("#");if(o||u){var i=c(r),a=i.anchor,f=i.route,s=i.query;void 0===f&&(f=e.value.route),l(e,a,f,s),t.preventDefault()}}}),"/"!==location.pathname||""!==location.search){var t=(location.pathname,location.search,location.hash,c(location.pathname+location.search+location.hash)),n=t.route,r=t.query;a(e,n,r)}}function o(e,t){var n=/(#\/\w*)?(\?(\w+=\w*)(&\w+=\w*)*)+(#\w+)?/g,r=RegExp(n).exec(e),o=RegExp(n).exec(t),u=r&&null!=r[3]?r[3].split("&"):[];u=o&&null!=o[3]?u.concat(o[3].split("&")):u;for(var i,c={},a=0;a<u.length;a++)if(i=u[a].split("="),void 0===c[i[0]])c[i[0]]=decodeURIComponent(i[1]);else if("string"==typeof c[i[0]]){var l=[c[i[0]],decodeURIComponent(i[1])];c[i[0]]=l}else c[i[0]].push(decodeURIComponent(i[1]));return c}function u(e,t){var n=e.router$,r=e.route;if(null==n)return console.log("The Router component needs the routerState$ as attribute."),null;if(null==r)return console.log("The Router component needs the route as attribute."),null;n.$("routes").map(function(e){return-1===e.indexOf(r)&&n.patch({routes:e.concat(r)})});var o=n.map(function(e){var t=e.route;return-1===e.routes.indexOf(t)?"/":t}),u=o.is(r).distinct();return(0,s.merge$)([u,t]).map(function(e){var t=f(e,2),n=t[0],r=t[1];return n?r:[]})}function i(){var e=(0,s.stream)({route:"",params:{},routes:["/"]});return r(e),e}function c(e){var t=/((\/\w*)*)?(\?((\w+=\w*)(&(\w+=\w*)+)*))?(#(\w+))?/,n=t.exec(e);return{anchor:n[9],route:n[1],query:n[4]}}function a(e,t){var n=location.hash.substr(1);e.patch({route:t||"",params:o(n,location.search)})}function l(e,t,n,r){history.pushState({anchor:t,route:n,query:r},"","/"+(n?n.substr(1):"")+(r?"?"+r:"")),t&&(location.hash="#"+t),a(e,n,r)}var f=function(){function e(e,t){var n=[],r=!0,o=!1,u=void 0;try{for(var i,c=e[Symbol.iterator]();!((r=(i=c.next()).done)||(n.push(i.value),t&&n.length===t));r=!0);}catch(e){o=!0,u=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw u}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Router=u,t.initRouter=i;var s=n(0)},function(e,t,n){"use strict";function r(e,t,n){return e.map(function(e){return e?t||null:n||null})}function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map(function(e){return null===e||void 0===e?(0,u.stream)(""):e.IS_STREAM?e:(0,u.stream)(e)});return(0,u.merge$)(r).map(function(e){return e.join(" ")})}Object.defineProperty(t,"__esModule",{value:!0}),t.promise$=void 0,t.if$=r,t.join$=o;var u=n(0);t.promise$=function(e){var t=(0,u.stream)({loading:!0,error:null,data:null});return e.then(function(e){t.patch({loading:!1,data:e})},function(e){t.patch({loading:!1,error:e})}),t}},function(e,t,n){"use strict";function r(e){Array.isArray(e)||(e=[e]),e=o(e).filter(function(e){return null!==e});var t=e.map(function(e){return(0,l.isStream)(e)?e.flatMap(r):e});return(0,l.merge$)(t)}function o(e,t){var n,r=Object.prototype.toString,o=[],u=t&&e||e.slice();if(!e.length)return o;n=u.pop();do{"[object Array]"===r.call(n)?u.push.apply(u,n):o.push(n)}while(u.length&&void 0!==(n=u.pop()));return o.reverse(),o}function u(e){if(null===e)return(0,l.stream)({});if((0,l.isStream)(e))return e;var t=i(e),n=t.map(function(e){var t=e.parent,n=e.key;return e.stream.distinct().map(function(e){return t[n]=e,e})});return(0,l.merge$)(n).map(function(){return e})}function i(e){return o(Object.keys(e).map(function(t){return null===e[t]?[]:"object"===c(e[t])?i(e[t]):(0,l.isStream)(e[t])?[{parent:e,key:t,stream:e[t]}]:[]}))}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){var n=[],r=!0,o=!1,u=void 0;try{for(var i,c=e[Symbol.iterator]();!((r=(i=c.next()).done)||(n.push(i.value),t&&n.length===t));r=!0);}catch(e){o=!0,u=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw u}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(t,"__esModule",{value:!0}),t.h=void 0,t.flatten=o;var l=n(1);n(3),t.h=function(e,t){for(var n=arguments.length,i=Array(2<n?n-2:0),c=2;c<n;c++)i[c-2]=arguments[c];var f=-1,s=r(o(i));return"function"==typeof e?e(t,s):(null!==t&&Object.keys(t).map(function(e){(0,l.isStream)(t[e])&&(t[e]=t[e])}),(0,l.merge$)([u(t),s.map(o)]).map(function(t){var n=a(t,2),r=n[0],o=n[1];return{tag:e,props:r,children:o,version:++f}}))}}])});