!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.zliq=t():e.zliq=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";(function(e){function r(e,t){return!(0,O.default)(e,t)}function o(e,t){e.value=t,i(e.listeners,t)}function i(e,t){e.forEach(function(e){e(t)})}function u(e,t){var n=void 0===e.value?void 0:t(e.value);return E(n)}function c(e,t){var n=u(e,t);return e.listeners.push(function(e){n(t(e))}),n}function l(e,t){return c(e,function(e){return console.log(t,e)}),e}function a(e,t){function n(e,t,n){var r=e(t);return r.listeners.push(n),r}var r=void 0,o=function(e){i(e)},i=u(e,function(e){return r=n(t,e,o),r.value});return e.listeners.push(function(e){r&&T(r.listeners,o),r=n(t,e,o),i(r.value)}),i}function f(e,t){var n=u(e,function(e){return t(e)?e:void 0});return e.listeners.push(function(e){t(e)&&n(e)}),n}function s(e,t){return null===e||void 0===e?null:0===t.length?e:s(e[t[0]],t.splice(1,t.length-1))}function d(e,t){var n=t.split("."),r=u(e,function(e){return s(e,n)});return e.listeners.push(function(e){r(s(e,n))}),r}function p(e,t){return Array.isArray(t)?e.map(function(e){return t.map(function(t){return s(e,t.split("."))})}):e.map(function(e){return s(e,t.split("."))})}function m(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e,t){return r(e,t)},n=u(e,function(e){return e});return e.listeners.push(function(e){t(n.value,e)&&n(e)}),n}function v(t,n){return e(function(){t(null===n||"object"!==(void 0===n?"undefined":j(n))||"object"!==j(t.value)?n:Object.assign({},t.value,n))}),t}function y(e,t){var n=E(),r=function(t,n){n(e.value),t.listeners.push(n)};return void 0===t.value&&r(e,n),t.map(function(t){t?T(e.listeners,n):r(e,n)}),n}function h(e,t,n){function r(){o=t(o,e.value),i(o)}var o=n,i=E();return void 0!==e.value&&r(e.value),e.listeners.push(r),i}function b(e,t){function n(e){r&&window.clearTimeout(r),r=setTimeout(function(){o(e),r=null},t)}var r=void 0,o=E();return void 0!==e.value&&n(e.value),e.listeners.push(n),o}function g(e){var t=e.map(function(e){return e&&e.IS_STREAM?e.value:e}),n=E(-1===t.indexOf(void 0)?t:void 0);return e.forEach(function(e,r){e.IS_STREAM&&e.listeners.push(function(e){t[r]=e,n(-1===t.indexOf(void 0)?t:void 0)})}),n}function S(e){return null!=e&&!!e.IS_STREAM}function T(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.stream=void 0,t.merge$=g,t.isStream=S;var _=n(7),O=function(e){return e&&e.__esModule?e:{default:e}}(_),E=t.stream=function(e){var t=function(e){return void 0===e?t.value:(o(t,e),t)};return t.IS_STREAM=!0,t.value=e,t.listeners=[],t.toString=function(){return t.value},t.map=function(e){return c(t,e)},t.is=function(e){return c(t,function(t){return t===e})},t.flatMap=function(e){return a(t,e)},t.filter=function(e){return f(t,e)},t.deepSelect=function(e){return d(t,e)},t.distinct=function(e){return m(t,e)},t.query=function(e){return p(t,e)},t.$=function(e){return p(t,e).distinct()},t.until=function(e){return y(t,e)},t.patch=function(e){return v(t,e)},t.reduce=function(e,n){return h(t,e,n)},t.debounce=function(e){return b(t,e)},t.log=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Stream:";return l(t,e)},t}}).call(t,n(12).setImmediate)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);Object.keys(r).forEach(function(e){"default"===e||"__esModule"===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n(4);Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=n(13);Object.keys(i).forEach(function(e){"default"===e||"__esModule"===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var u=n(5);Object.keys(u).forEach(function(e){"default"===e||"__esModule"===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})})},function(e,t,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":o(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);Object.keys(r).forEach(function(e){"default"===e||"__esModule"===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n(6);Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})},function(e,t,n){"use strict";function r(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:10;return e(n).debounce(r).reduce(function(e,n){var r=e.element,i=e.version,u=e.children,c=e.keyContainer,l=n.tag,a=n.props,f=n.children,s=n.version;null===r&&(r=m(l,f),t&&t.appendChild(r));var d=o(r,{tag:l,props:a,children:f,version:s},{children:u,version:i},c);return t&&0===s&&y(r,a,"mounted"),{element:d,version:s,children:v(f),keyContainer:c}},{element:null,version:-1,children:[],keyContainer:{}})}function o(e,t,n,r){return t.props&&t.props.id?i(e,t,n,r):u(e,t,n,r)}function i(e,t,n,r){var o=t.tag,i=t.props,u=t.children,c=t.version,l=n.props,a=i.id,s=!1,p=!1;void 0===r[a]&&(r[a]={element:document.createElement(o),vdom:{tag:o,props:{},children:[]}},s=!0);var m=r[a];return c!==m.version&&(f(m.element,i,l),d(m.element,u,m.vdom.children,r),m.version=c,m.vdom.props=i,m.vdom.children=u,p=!0),s?y(m.element,i,"created"):p&&y(m.element,i,"updated"),e!==m.element&&(e.parentElement.replaceChild(m.element,e),y(m.element,i,"mounted")),m.element}function u(e,t,n,r){var o=t.tag,i=t.props,u=t.children,c=t.version,l=n.props,a=n.children,s=n.version,p=-1===s||void 0===s;if(b(e)&&o===_)return g(e,u[0]),e;if(!1===S(e,i,o)){var v=m(o,u);e.parentElement.replaceChild(v,e),e=v,a=[]}f(e,i,l);var h=i&&void 0!==i.isolated;return o!==_&&(!h||p)&&d(e,u,a,r),p&&y(e,i,"created"),0<c&&y(e,i,"updated"),e}function c(e,t,n){var r=e.childNodes.length;for(n.length!==r&&console.warn("ZLIQ: Something other then ZLIQ has manipulated the children of the element",e,". This can lead to sideffects. Consider using the 'isolated' attribute for this element to prevent updates.");r>t.length;r--){var o=e.childNodes[r-1];e.removeChild(o),n.length<r||y(o,{cycle:n[r-1].cycle},"removed")}}function l(e,t,n,r){for(var i=e.childNodes,u=0;u<i.length&&u<t.length;u++)o(i[u],t[u],n[u],r)}function a(e,t,n){for(var r=e.childNodes.length;r<t.length;r++){var i=t[r],u=i.tag,c=i.props,l=i.children,a=(i.version,m(u,l));e.appendChild(a),o(a,t[r],{},n),c&&c.cycle&&c.cycle.mounted&&!c.id&&console.error("The 'mounted' lifecycle event is only called on elements with id. As elements are updated in place, it is hard to define when a normal element is mounted.")}}function f(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};void 0!==t&&(Object.keys(t).map(function(n){s(e,n,t[n])}),Object.keys(n).map(function(n){void 0===t[n]&&e.removeAttribute(n)}))}function s(e,t,n){if("class"===t||"className"===t)e.className=n||"";else if("style"===t&&"string"!=typeof n){var r=n?Object.keys(n).map(function(e){return e+":"+n[e]+";"}).join(" "):"";e.style.cssText=r}else e[t]=null===n?void 0:n}function d(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],r=arguments[3];if(0!==t.length||0!==n.length){var o=(e.childNodes,p(t));l(e,o,p(n),r),c(e,o,n),a(e,o,r)}}function p(e){return e.map(function(e){return(0,j.isStream)(e)||void 0!==e.tag?e:{tag:_,children:[e],version:0}})}function m(e,t){return e===_?document.createTextNode(t[0]):document.createElement(e)}function v(e){var t=JSON.parse(JSON.stringify(e));return t.forEach(function(t,n){var r=e[n];r.props&&r.props.cycle&&(t.cycle=r.props.cycle),"object"===T(e[n])&&(t.children=v(r.children))}),t}function y(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.cycle,r=arguments[2];n&&n[r]&&n[r](e)}function h(e,t){return e.nodeName.toLowerCase()!==t}function b(e){return e instanceof window.Text}function g(e,t){e.nodeValue!==t&&(e.nodeValue=t)}function S(e,t,n){return!b(e)&&""===e.id&&!h(e,n)}var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.render=r,t.diff=o,t.createNode=m;var j=n(0),_="#text"},function(e,t,n){"use strict";function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return void 0!==e&&(0,a.isStream)(e)?e.map(function(e){return e?t:n}):(0,a.stream)(e?t:n)}function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.merge$)(t).map(function(e){return e.join(" ")})}function i(e){if(null===e)return(0,a.stream)({});var t=u(e),n=t.map(function(e){var t=e.parent,n=e.key;return e.stream.distinct().map(function(e){return t[n]=e,e})});return(0,a.merge$)(n).map(function(){return e})}function u(e){return c(Object.keys(e).map(function(t){return null===e[t]||void 0===e[t]?[]:(0,a.isStream)(e[t])?[{parent:e,key:t,stream:e[t]}]:"object"===l(e[t])?u(e[t]):[]}))}function c(e,t){var n,r=Object.prototype.toString,o=[],i=t&&e||e.slice();if(!e.length)return o;n=i.pop();do{"[object Array]"===r.call(n)?i.push.apply(i,n):o.push(n)}while(i.length&&void 0!==(n=i.pop()));return o.reverse(),o}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.promise$=void 0,t.if$=r,t.join$=o,t.resolve$=i,t.flatten=c;var a=n(1);t.promise$=function(e){var t=(0,a.stream)({loading:!0,error:null,data:null});return e.then(function(e){t.patch({loading:!1,data:e})},function(e){t.patch({loading:!1,error:e})}),t}},function(e,t,n){"use strict";function r(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{attach:!1,debounce:0,globals:{}},i=document.createElement("div");return r.attach&&document.body.appendChild(i),t=t.map(function(e){return"string"==typeof e?function(t){var n=t.element;return expect(n.outerHTML).toBe(e)}:e}),o((0,u.render)(e,i,r.globals,r.debounce),t,n)}function o(e,t,n){return e.reduce(function(e,r){return void 0===t[e]&&n.fail("Unexpected Update!"),i(t,e,r,n),e+1},0)}function i(e,t,n,r){setTimeout(function(){try{"function"==typeof e[t]?e[t](n):expect(n).toEqual(e[t])}catch(e){r.fail(e)}e.length===t+1&&r&&r()})}Object.defineProperty(t,"__esModule",{value:!0}),t.testRender=r,t.test$=o;var u=n(3)},function(e,t,n){"use strict";function r(e){return null===e||void 0===e}function o(e){return e&&"object"===(void 0===e?"undefined":u(e))&&"number"==typeof e.length&&"function"==typeof e.copy&&"function"==typeof e.slice&&!(0<e.length&&"number"!=typeof e[0])}function i(e,t,n){var i,s;if(r(e)||r(t))return!1;if(e.prototype!==t.prototype)return!1;if(a(e))return!!a(t)&&(e=c.call(e),t=c.call(t),f(e,t,n));if(o(e)){if(!o(t))return!1;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}try{var d=l(e),p=l(t)}catch(e){return!1}if(d.length!=p.length)return!1;for(d.sort(),p.sort(),i=d.length-1;0<=i;i--)if(d[i]!=p[i])return!1;for(i=d.length-1;0<=i;i--)if(s=d[i],!f(e[s],t[s],n))return!1;return(void 0===e?"undefined":u(e))===(void 0===t?"undefined":u(t))}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=Array.prototype.slice,l=n(9),a=n(8),f=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e&&t&&("object"==(void 0===e?"undefined":u(e))||"object"==(void 0===t?"undefined":u(t)))?i(e,t,n):n.strict?e===t:e==t)}},function(e,t,n){"use strict";function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function o(e){return e&&"object"==(void 0===e?"undefined":i(e))&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();t=e.exports=u?r:o,t.supported=r,t.unsupported=o},function(e,t,n){"use strict";function r(e){var t=[];for(var n in e)t.push(n);return t}t=e.exports="function"==typeof Object.keys?Object.keys:r,t.shim=r},function(e,t,n){"use strict";function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(s===setTimeout)return setTimeout(e,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}function u(e){if(d===clearTimeout)return clearTimeout(e);if((d===o||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function c(){y&&m&&(y=!1,m.length?v=m.concat(v):h=-1,v.length&&l())}function l(){if(!y){var e=i(c);y=!0;for(var t=v.length;t;){for(m=v,v=[];++h<t;)m&&m[h].run();h=-1,t=v.length}m=null,y=!1,u(e)}}function a(e,t){this.fun=e,this.array=t}function f(){}var s,d,p=e.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(e){s=r}try{d="function"==typeof clearTimeout?clearTimeout:o}catch(e){d=o}}();var m,v=[],y=!1,h=-1;p.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new a(e,t)),1!==v.length||y||i(l)},a.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=f,p.addListener=f,p.once=f,p.off=f,p.removeListener=f,p.removeAllListeners=f,p.emit=f,p.prependListener=f,p.prependOnceListener=f,p.listeners=function(){return[]},p.binding=function(){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";(function(e,t){!function(e,n){function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return a[l]=r,c(l),l++}function o(e){delete a[e]}function i(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function u(e){if(f)setTimeout(u,0,e);else{var t=a[e];if(t){f=!0;try{i(t)}finally{o(e),f=!1}}}}if(!e.setImmediate){var c,l=1,a={},f=!1,s=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){u(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&u(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){u(e.data)},c=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;c=function(t){var n=s.createElement("script");n.onreadystatechange=function(){u(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(u,0,e)}}(),d.setImmediate=r,d.clearImmediate=o}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(t,n(2),n(10))},function(e,t,n){"use strict";(function(e){function r(e,t){this._id=e,this._clearFn=t}var o=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;t.setTimeout=function(){return new r(i.call(setTimeout,o,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,o,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(o,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(11),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||void 0,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||void 0}).call(t,n(2))},function(e,t,n){"use strict";function r(e){Array.isArray(e)||(e=[e]),e=(0,l.flatten)(e).filter(function(e){return null!==e});var t=e.map(function(e){return(0,c.isStream)(e)?e.flatMap(r):e});return(0,c.merge$)(t)}function o(e,t){Array.isArray(e)||(e=[].concat(e));var n=e.map(function(e){return Array.isArray(e)?o(e,t):i(e,t)});return(0,l.flatten)(n)}function i(e,t){return"function"==typeof e?e.IS_ELEMENT_CONSTRUCTOR?e(t):(0,c.isStream)(e)?e.map(function(e){return o(e,t)}):void 0:e}Object.defineProperty(t,"__esModule",{value:!0}),t.h=void 0;var u=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=n(0),l=(n(4),n(5));t.h=function(e,t){for(var n=arguments.length,a=Array(2<n?n-2:0),f=2;f<n;f++)a[f-2]=arguments[f];var s=function(n){var f=-1,s=o(a,n),d=r(s);if("function"==typeof e){var p=e(t||{},d,n);return p.IS_ELEMENT_CONSTRUCTOR||(0,c.isStream)(p)?i(p,n):(0,c.merge$)([(0,l.resolve$)(t),d.map(l.flatten)]).map(function(e){var t=u(e,2),r=t[0],o=t[1];return p(r,o,n)}).map(o)}return(0,c.merge$)([(0,l.resolve$)(t),d.map(l.flatten)]).map(function(t){var n=u(t,2),r=n[0],o=n[1];return{tag:e,props:r,children:o,version:++f}})};return s.IS_ELEMENT_CONSTRUCTOR=!0,s}}])});