{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap b31ac10d0450041c9e06","webpack:///./src/utils/streamy.js","webpack:///./src/utils/index.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/index.js","webpack:///./src/utils/streamy-helpers.js","webpack:///./test/helpers/test-component.js","webpack:///./~/deep-equal/index.js","webpack:///./~/deep-equal/lib/is_arguments.js","webpack:///./~/deep-equal/lib/keys.js","webpack:///./~/process/browser.js","webpack:///./~/setimmediate/setImmediate.js","webpack:///./~/timers-browserify/main.js","webpack:///./src/utils/streamy-dom.js","webpack:///./src/utils/streamy-hyperscript.js"],"names":["merge$","isStream","stream","init_value","s","value","undefined","update","IS_STREAM","listeners","toString","map","fn","is","cur","flatMap","filter","deepSelect","distinct","query","selectorArr","$","until","stopEmit$","patch","partialChange","reduce","startValue","debounce","timer","schedule","scheduleItems","onDone","log","prefix","valuesChanged","oldValue","newValue","parent$","notifyListeners","forEach","notifyListener","listener","fork$","mapFunction","initValue","newStream","push","mapValue","console","result$","updateOuterStream","result","attachToResult$","mapFn","parentValue","getChildStreamValue","flatMapValue","removeItem","filterValue","select","parent","selectors","length","selector","splice","split","deepSelectValue","selectorsArr","Array","isArray","a","b","setImmediate","Object","assign","stopEmitValues$","subscribeTo","stopEmitValues","aggregate","reduceValue","curTimer","debounceValue","window","clearTimeout","setTimeout","updateChildStream","executeScheduleItem","iteration","Error","item","checkSchedule","potentialStreamsArr","values","indexOf","potentialStream","index","updateMergedStream","arr","g","Function","eval","e","module","exports","if$","join$","resolve$","flatten","promise$","output$","loading","error","data","promise","then","boolean$","onTrue","onFalse","x","$arr","join","obj","nestedStreams","extractNestedStreams","updateStreams","makeNestedStreamUpdateObject","key","keys","array","mutable","prototype","arrayTypeStr","nodes","slice","node","pop","call","apply","reverse","testRender","test$","vdom$","done","options","attach","globals","container","document","createElement","body","appendChild","element","expect","outerHTML","toBe","testIteration","fail","Promise","resolve","reject","toEqual","pSlice","objectKeys","require","isArguments","deepEqual","actual","expected","opts","Date","getTime","strict","objEquiv","isUndefinedOrNull","isBuffer","copy","i","ka","kb","sort","supportsArgumentsClass","arguments","supported","unsupported","object","hasOwnProperty","propertyIsEnumerable","shim","process","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","nextTick","args","Item","title","browser","env","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","name","binding","cwd","chdir","dir","umask","global","nextHandle","tasksByHandle","currentlyRunningATask","doc","registerImmediate","callback","task","clearImmediate","handle","runIfPresent","installNextTickImplementation","canUsePostMessage","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","installPostMessageImplementation","messagePrefix","Math","random","onGlobalMessage","event","source","addEventListener","attachEvent","installMessageChannelImplementation","channel","MessageChannel","port1","port2","installReadyStateChangeImplementation","html","documentElement","script","onreadystatechange","removeChild","installSetTimeoutImplementation","attachTo","getPrototypeOf","self","scope","Timeout","setInterval","clearInterval","close","id","clearFn","_id","_clearFn","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","onTimeout","_onTimeout","render","diff","createNode","TEXT_NODE","vdom","parentElement","IS_ELEMENT_CONSTRUCTOR","renderUpdate","oldElement","oldVersion","oldChildren","children","keyContainer","tag","props","newElement","triggerLifecycle","copyChildren","err","newChild","oldChild","cacheContainer","isCaching","diffCachedElement","diffElement","style","oldProps","gotCreated","gotUpdated","elementCache","diffAttributes","diffChildren","replaceChild","newChildren","newVersion","initialRender","isTextNode","updateTextNode","shouldRecycleElement","isolated","removeNotNeededNodes","parentElements","remaining","childNodes","warn","childToRemove","cycle","updateExistingNodes","addNewNodes","mounted","applyPropertyToElement","attribute","applyAttribute","removeNotNeededAttributes","oldAttribute","removeAttribute","className","cssText","oldChildNodes","unifiedNewChildren","unifyChildren","unifiedOldChildren","child","createTextNode","JSON","parse","stringify","nodeTypeDiffers","nodeName","toLowerCase","Text","nodeValue","resolveTag","h","hyperscriptTag","elementConstructor","constructedChildren","resolveChildren","mergedChildren$","mergeChildren$","output","resolveChild","classes","mergeHyperscript","_","childrenVdom$arr","resolvedChilden","end","indexOfRegex","substr","startsWith","class","classResults","string","regex","match"],"mappings":"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","file":"zliq.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"zliq\"] = factory();\n\telse\n\t\troot[\"zliq\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b31ac10d0450041c9e06","import deepEqual from \"deep-equal\"\n\n/*\n* stream constructor\n* constructor returns a stream\n* get the current value of stream like: stream.value\n*/\nexport const stream = function(init_value) {\n  let s = function(value) {\n    if (value === undefined) {\n      return s.value\n    }\n    update(s, value)\n    return s\n  }\n\n  s.IS_STREAM = true\n  s.value = init_value\n  s.listeners = []\n\n  // better debugging output for streams\n  s.toString = () => \"Stream(\" + s.value + \")\"\n\n  s.map = fn => map(s, fn)\n  s.is = value => map(s, cur => cur === value)\n  s.flatMap = fn => flatMap(s, fn)\n  s.filter = fn => filter(s, fn)\n  s.deepSelect = fn => deepSelect(s, fn)\n  s.distinct = fn => distinct(s, fn)\n  s.query = selectorArr => query(s, selectorArr)\n  s.$ = selectorArr => query(s, selectorArr).distinct()\n  s.until = stopEmit$ => until(s, stopEmit$)\n  s.patch = partialChange => patch(s, partialChange)\n  s.reduce = (fn, startValue) => reduce(s, fn, startValue)\n  s.debounce = timer => debounce(s, timer)\n  s.schedule = (scheduleItems, onDone) => schedule(s, scheduleItems, onDone)\n  s.log = (prefix = \"Stream:\") => log(s, prefix)\n\n  return s\n}\n\n/*\n* wrapper for the diffing of stream values\n*/\nfunction valuesChanged(oldValue, newValue) {\n  return !deepEqual(oldValue, newValue)\n}\n\n/*\n* update the stream value and notify listeners on the stream\n*/\nfunction update(parent$, newValue) {\n  parent$.value = newValue\n  notifyListeners(parent$.listeners, newValue)\n}\n\n/*\n* provide a new value to all listeners registered for a stream\n*/\nfunction notifyListeners(listeners, value) {\n  listeners.forEach(function notifyListener(listener) {\n    listener(value)\n  })\n}\n\n/*\n* Do not pipe the value undefined. This allows to wait for an external initialization.\n* It also saves you from checking for an initial null on every map function.\n*/\nfunction fork$(parent$, mapFunction) {\n  let initValue =\n    parent$.value !== undefined ? mapFunction(parent$.value) : undefined\n  return stream(initValue)\n}\n\n/*\n* provides a new stream applying a transformation function to the value of a parent stream\n*/\nfunction map(parent$, fn) {\n  let newStream = fork$(parent$, fn)\n  parent$.listeners.push(function mapValue(value) {\n    newStream(fn(value))\n  })\n  return newStream\n}\n\n/* \n* helper function to debug, calls console.log on every value returnin the parent stream \n*/\nfunction log(parent$, prefix) {\n  map(parent$, value => console.log(prefix, value))\n  return parent$\n}\n\n/*\n* provides a new stream applying a transformation function to the value of a parent stream\n*/\nfunction flatMap(parent$, fn) {\n  let result$\n  let listener = function updateOuterStream(result) {\n    newStream(result)\n  }\n  function attachToResult$(mapFn, parentValue, listener) {\n    let result$ = mapFn(parentValue)\n    result$.listeners.push(listener)\n    return result$\n  }\n  let newStream = fork$(parent$, function getChildStreamValue(value) {\n    result$ = attachToResult$(fn, value, listener)\n    return result$.value\n  })\n  parent$.listeners.push(function flatMapValue(value) {\n    // clean up listeners or they will stack on child streams\n    if (result$) {\n      removeItem(result$.listeners, listener)\n    }\n\n    result$ = attachToResult$(fn, value, listener)\n    newStream(result$.value)\n  })\n  return newStream\n}\n\n/*\n* provides a new stream that only serves the values that a filter function returns true for\n* still a stream ALWAYS has a value -> so it starts at least with NULL\n*/\nfunction filter(parent$, fn) {\n  let newStream = fork$(parent$, value => (fn(value) ? value : undefined))\n  parent$.listeners.push(function filterValue(value) {\n    if (fn(value)) {\n      newStream(value)\n    }\n  })\n  return newStream\n}\n\n/*\n* recursivly return the nested property of an object defined by an array of selectors\n* parent: {foo: {bar:1}}, selectors: ['foo','bar'] returns 1\n*/\nfunction select(parent, selectors) {\n  if (parent === null || parent === undefined) {\n    return null\n  }\n  if (selectors.length === 0) {\n    return parent\n  }\n  let selector = selectors[0]\n  return select(parent[selector], selectors.splice(1, selectors.length - 1))\n}\n/*\n* provides a new stream that has a selected sub property of the object value of the parent stream\n* the selector has the format [{propertyName}.]*\n*/\nfunction deepSelect(parent$, selector) {\n  let selectors = selector.split(\".\")\n\n  let newStream = fork$(parent$, value => select(value, selectors))\n  parent$.listeners.push(function deepSelectValue(newValue) {\n    newStream(select(newValue, selectors))\n  })\n  return newStream\n}\n\nfunction query(parent$, selectorsArr) {\n  if (!Array.isArray(selectorsArr)) {\n    return parent$.map(value => select(value, selectorsArr.split(\".\")))\n  }\n  return parent$.map(value =>\n    selectorsArr.map(selectors => select(value, selectors.split(\".\")))\n  )\n}\n\n// TODO: maybe refactor with filter\n/*\n* provide a new stream that only notifys its children if the containing value actualy changes\n*/\nfunction distinct(parent$, fn = (a, b) => valuesChanged(a, b)) {\n  let newStream = fork$(parent$, value => value)\n  parent$.listeners.push(function deepSelectValue(value) {\n    if (fn(newStream.value, value)) {\n      newStream(value)\n    }\n  })\n  return newStream\n}\n\n/*\n* update only the properties of an object passed\n* i.e. {name: 'Fabian', lastname: 'Weber} patched with {name: 'Fabo'} produces {name: 'Fabo', lastname: 'Weber}\n*/\nfunction patch(parent$, partialChange) {\n  setImmediate(() => {\n    if (\n      partialChange === null ||\n      typeof partialChange !== \"object\" ||\n      typeof parent$.value !== \"object\"\n    ) {\n      parent$(partialChange)\n    } else {\n      parent$(Object.assign({}, parent$.value, partialChange))\n    }\n  })\n  return parent$\n}\n\nfunction until(parent$, stopEmitValues$) {\n  let newStream = stream()\n  let subscribeTo = (stream, listener) => {\n    listener(parent$.value)\n    stream.listeners.push(listener)\n  }\n  if (stopEmitValues$.value === undefined) {\n    subscribeTo(parent$, newStream)\n  }\n  stopEmitValues$.map(stopEmitValues => {\n    if (stopEmitValues) {\n      removeItem(parent$.listeners, newStream)\n    } else {\n      subscribeTo(parent$, newStream)\n    }\n  })\n  return newStream\n}\n\n/*\n* reduce a stream over time\n* this will pass the last output value to the calculation function\n* reads like the array reduce function\n*/\nfunction reduce(parent$, fn, startValue) {\n  let aggregate = startValue\n  let newStream = stream()\n  function reduceValue(value) {\n    aggregate = fn(aggregate, parent$.value)\n    newStream(aggregate)\n  }\n  if (parent$.value !== undefined) {\n    reduceValue(parent$.value)\n  }\n  parent$.listeners.push(reduceValue)\n  return newStream\n}\n\nfunction debounce(parent$, timer) {\n  let curTimer\n  function debounceValue(value) {\n    if (curTimer) {\n      window.clearTimeout(curTimer)\n    }\n    curTimer = setTimeout(function updateChildStream() {\n      newStream(value)\n      curTimer = null\n    }, timer)\n  }\n  let newStream = stream()\n  if (parent$.value !== undefined) {\n    debounceValue(parent$.value)\n  }\n  parent$.listeners.push(debounceValue)\n  return newStream\n}\n\n/*\n* Execute the scheduled function or return the scheduled value for a stream iteration\n*/\nfunction executeScheduleItem(schedule, iteration, value) {\n  if (schedule.length < iteration + 1) {\n    throw Error(\"ZLIQ: schedule for iteration \" + iteration + \" not defined\")\n  }\n  let item = schedule[iteration]\n  if (typeof item === \"function\") {\n    return item(value)\n  } else {\n    return item\n  }\n}\n\n/*\n* Especially in tests you want to define a reaction to a certain iteration of a stream\n* The iteration can be a function or a value\n*/\nfunction schedule(parent$, schedule, onDone = () => {}) {\n  let iteration = 0\n  let newStream = fork$(parent$, value =>\n    executeScheduleItem(schedule, iteration++, value)\n  )\n  if (schedule.length === iteration) onDone()\n\n  parent$.listeners.push(function checkSchedule(value) {\n    // do immediate to prevent schedule items to update parent streams before child streams ran\n    setImmediate(() => {\n      newStream(executeScheduleItem(schedule, iteration++, value))\n      if (iteration === schedule.length) onDone()\n    })\n  })\n  return newStream\n}\n\n/*\n* merge several streams into one stream providing the values of all streams as an array\n* accepts also non stream elements, those are just copied to the output\n* the merge will only have a value if every stream for the merge has a value\n*/\nexport function merge$(potentialStreamsArr) {\n  let values = potentialStreamsArr.map(\n    parent$ => (parent$ && parent$.IS_STREAM ? parent$.value : parent$)\n  )\n  let newStream = stream(values.indexOf(undefined) === -1 ? values : undefined)\n\n  potentialStreamsArr.forEach((potentialStream, index) => {\n    if (potentialStream.IS_STREAM) {\n      potentialStream.listeners.push(function updateMergedStream(value) {\n        values[index] = value\n        newStream(values.indexOf(undefined) === -1 ? values : undefined)\n      })\n    }\n  })\n  return newStream\n}\n\nexport function isStream(parent$) {\n  return parent$ != null && !!parent$.IS_STREAM\n}\n\nfunction removeItem(arr, item) {\n  var index = arr.indexOf(item)\n  if (index !== -1) {\n    arr.splice(index, 1)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/streamy.js","export * from \"./streamy\";\nexport * from \"./streamy-dom\";\nexport * from \"./streamy-hyperscript\";\nexport * from \"./streamy-helpers\";\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/index.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/global.js","export * from \"./utils\";\nexport * from \"../test/helpers/test-component\";\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import { stream, merge$, isStream } from \"./\";\n\n// wrapper around promises to provide an indicator if the promise is running\nexport const promise$ = promise => {\n  let output$ = stream({\n    loading: true,\n    error: null,\n    data: null\n  });\n\n  promise.then(\n    result => {\n      output$.patch({\n        loading: false,\n        data: result\n      });\n    },\n    error => {\n      output$.patch({\n        loading: false,\n        error\n      });\n    }\n  );\n\n  return output$;\n};\n\n// provide easy switched on boolean streams\n// example use case: <button onclick={()=>open$(!open$())}>{if$(open$, 'Close', 'Open')}</button>\nexport function if$(boolean$, onTrue = null, onFalse = null) {\n  if (boolean$ === undefined || !isStream(boolean$)) {\n    return stream(boolean$ ? onTrue : onFalse);\n  }\n  return boolean$.map(x => (x ? onTrue : onFalse));\n}\n\n// join a mixed array of strings and streams of strings\n// example use case: <div class={join$('container', if$(open$, 'open', 'closed'))} />\nexport function join$(...$arr) {\n  return merge$($arr).map(arr => arr.join(\" \"));\n}\n\n/*\n* Resolve all nested streams in an object\n* input: {a:{}, b:stream:{}}\n* output: stream({a:{}, b:{}})\n*/\nexport function resolve$(obj) {\n  if (obj === null) return stream({});\n\n  let nestedStreams = extractNestedStreams(obj);\n  let updateStreams = nestedStreams.map(function makeNestedStreamUpdateObject({\n    parent,\n    key,\n    stream\n  }) {\n    return (\n      stream\n        .distinct()\n        // here we produce a sideeffect on the object -> low GC\n        // to trigger the merge we also need to return sth (as undefined does not trigger listeners)\n        .map(value => {\n          parent[key] = value;\n          return value;\n        })\n    );\n  });\n  return merge$(updateStreams).map(_ => obj);\n}\n\n// to react to nested streams in an object, we extract the streams and a reference to their position\n// returns [{parentObject, propertyName, stream}]\nfunction extractNestedStreams(obj) {\n  return flatten(\n    Object.keys(obj).map(key => {\n      // DEPRECATED I can't think of a usecase\n      // if (typeof obj[key] === 'object') {\n      // \treturn extractNestedStreams(obj[key]);\n      // }\n      if (obj[key] === null || obj[key] === undefined) {\n        return [];\n      }\n      if (isStream(obj[key])) {\n        return [\n          {\n            parent: obj,\n            key,\n            stream: obj[key]\n          }\n        ];\n      }\n      if (typeof obj[key] === \"object\") {\n        return extractNestedStreams(obj[key]);\n      }\n      return [];\n    })\n  );\n}\n\n// flattens an array\nexport function flatten(array, mutable) {\n  var toString = Object.prototype.toString;\n  var arrayTypeStr = \"[object Array]\";\n\n  var result = [];\n  var nodes = (mutable && array) || array.slice();\n  var node;\n\n  if (!array.length) {\n    return result;\n  }\n\n  node = nodes.pop();\n\n  do {\n    if (toString.call(node) === arrayTypeStr) {\n      nodes.push.apply(nodes, node);\n    } else {\n      result.push(node);\n    }\n  } while (nodes.length && (node = nodes.pop()) !== undefined);\n\n  result.reverse(); // we reverse result to restore the original order\n  return result;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/streamy-helpers.js","import { diff, createNode, render } from \"../../src\"\n\nexport function testRender(\n  vdom$,\n  schedule,\n  done,\n  options = {\n    attach: false,\n    debounce: 0,\n    globals: {}\n  }\n) {\n  let container = document.createElement(\"div\")\n  if (options.attach) {\n    document.body.appendChild(container)\n  }\n  // enable to just define the expected html in the render schedule\n  schedule = schedule.map(fn => {\n    if (typeof fn === \"string\") {\n      return ({ element }) => expect(element.outerHTML).toBe(fn)\n    }\n    return fn\n  })\n  return test$(\n    render(vdom$, container, options.globals, options.debounce),\n    schedule,\n    done\n  )\n}\n\nexport function test$(stream, schedule, done) {\n  return stream.schedule(\n    schedule.map(iteration => value => {\n      testIteration(iteration, value).then(null, done.fail)\n      return value\n    }),\n    done\n  )\n}\n\nfunction testIteration(iteration, value, done) {\n  return new Promise((resolve, reject) => {\n    // tests produce async behavior often synchronous\n    // this can cause race effects on stream declarations\n    // here the iterations are made asynchronous to prevent this\n    setTimeout(function() {\n      try {\n        if (typeof iteration === \"function\") {\n          iteration(value)\n        } else {\n          expect(value).toEqual(iteration)\n        }\n        resolve()\n      } catch (error) {\n        reject(error)\n      }\n    })\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./test/helpers/test-component.js","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/deep-equal/index.js","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/deep-equal/lib/is_arguments.js","exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/deep-equal/lib/keys.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n// WEBPACK FOOTER //\n// ./~/process/browser.js","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n\n\n// WEBPACK FOOTER //\n// ./~/setimmediate/setImmediate.js","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n\n\n\n// WEBPACK FOOTER //\n// ./~/timers-browserify/main.js","import { isStream, stream } from \"./streamy\";\n\nexport const TEXT_NODE = \"#text\";\n\nexport function render(vdom, parentElement, globals = {}, debounce = 10) {\n  let vdom$;\n  if (isStream(vdom)) {\n    vdom$ = vdom;\n  } else if (vdom.IS_ELEMENT_CONSTRUCTOR) {\n    vdom$ = vdom(globals);\n  } else if (typeof vdom === \"function\") {\n    // simple element constructor\n    vdom$ = vdom({}, [], globals);\n  }\n\n  if (!isStream(vdom$)) vdom$ = stream(vdom$);\n  return vdom$.debounce(debounce).reduce(\n    function renderUpdate(\n      {\n        element: oldElement,\n        version: oldVersion,\n        children: oldChildren,\n        keyContainer\n      },\n      { tag, props, children, version }\n    ) {\n      try {\n        if (oldElement === null) {\n          oldElement = createNode(tag, children);\n          if (parentElement) {\n            parentElement.appendChild(oldElement);\n          }\n        }\n        let newElement = diff(\n          oldElement,\n          { tag, props, children, version },\n          { children: oldChildren, version: oldVersion },\n          keyContainer\n        );\n\n        // signalise mount of root element on initial render\n        if (parentElement && version === 0) {\n          triggerLifecycle(oldElement, props, \"mounted\");\n        }\n\n        return {\n          element: newElement,\n          version,\n          children: copyChildren(children),\n          keyContainer\n        };\n      } catch (err) {\n        console.error(\"Error in rendering step:\", err);\n      }\n    },\n    {\n      element: null,\n      version: -1,\n      children: [],\n      keyContainer: {}\n    }\n  );\n}\n\nexport function diff(oldElement, newChild, oldChild, cacheContainer) {\n  let newElement = oldElement;\n  let isCaching = newChild.props && newChild.props.id;\n\n  try {\n    // for keyed elements, we recall unchanged elements\n    if (isCaching) {\n      newElement = diffCachedElement(\n        oldElement,\n        newChild,\n        oldChild,\n        cacheContainer\n      );\n    } else {\n      newElement = diffElement(oldElement, newChild, oldChild, cacheContainer);\n    }\n  } catch (err) {\n    // on errors, show an error element instead of crashing\n    newElement = {\n      tag: \"div\",\n      props: {\n        style: \"border: 1px solid red; color: red;\"\n      },\n      children: [\"FAULTY ELEMENT\"]\n    };\n    console.error(\"[ERROR]: An element failed to render.\\n\", err);\n  }\n\n  return newElement;\n}\n\nfunction diffCachedElement(\n  oldElement,\n  { tag, props, children, version },\n  { props: oldProps },\n  cacheContainer\n) {\n  let id = props.id;\n  let gotCreated = false;\n  let gotUpdated = false;\n\n  // if there is no cache, create one\n  if (cacheContainer[id] === undefined) {\n    cacheContainer[id] = {\n      element: document.createElement(tag),\n      vdom: {\n        tag,\n        props: {},\n        children: []\n      }\n    };\n    gotCreated = true;\n  }\n\n  let elementCache = cacheContainer[id];\n\n  // ignore update if version equals cache\n  if (version !== elementCache.version) {\n    diffAttributes(elementCache.element, props, oldProps);\n    diffChildren(\n      elementCache.element,\n      children,\n      elementCache.vdom.children,\n      cacheContainer\n    );\n\n    elementCache.version = version;\n    elementCache.vdom.props = props;\n    elementCache.vdom.children = children;\n\n    gotUpdated = true;\n  }\n\n  if (gotCreated) {\n    triggerLifecycle(elementCache.element, props, \"created\");\n  } else if (gotUpdated) {\n    triggerLifecycle(elementCache.element, props, \"updated\");\n  }\n\n  // elements are updated in place, so only insert cached element if it's not already there\n  if (oldElement !== elementCache.element) {\n    oldElement.parentElement.replaceChild(elementCache.element, oldElement);\n    triggerLifecycle(elementCache.element, props, \"mounted\");\n  }\n\n  return elementCache.element;\n}\n\nfunction diffElement(\n  element,\n  { tag, props, children: newChildren, version: newVersion },\n  { props: oldProps, children: oldChildren, version: oldVersion },\n  cacheContainer\n) {\n  let initialRender = oldVersion === -1 || oldVersion === undefined;\n\n  // text nodes behave differently then normal dom elements\n  if (isTextNode(element) && tag === TEXT_NODE) {\n    updateTextNode(element, newChildren[0]);\n    return element;\n  }\n\n  // if the node types do not differ, we reuse the old node\n  // we reuse the existing node to save time rerendering it\n  // we do not reuse/mutate cached (id) elements as this will mutate the cache\n  if (shouldRecycleElement(element, props, tag) === false) {\n    let newElement = createNode(tag, newChildren);\n    element.parentElement.replaceChild(newElement, element);\n    element = newElement;\n    // there are no children anymore on the newly created node\n    oldChildren = [];\n  }\n\n  diffAttributes(element, props, oldProps);\n\n  // sometimes you might want to skip updates to children on renderer elements i.e. if externals handle this component\n  let isolated = props && props.isolated !== undefined;\n\n  // text nodes we don't want to handle children like with other elements\n  // and for isolated components we want to skip all updates after the first render\n  if (tag !== TEXT_NODE && (!isolated || initialRender)) {\n    diffChildren(element, newChildren, oldChildren, cacheContainer);\n  }\n\n  if (initialRender) {\n    triggerLifecycle(element, props, \"created\");\n  }\n\n  if (newVersion > 0) {\n    triggerLifecycle(element, props, \"updated\");\n  }\n\n  return element;\n}\n\n// this removes nodes at the end of the children, that are not needed anymore in the current state for recycling\nfunction removeNotNeededNodes(parentElements, newChildren, oldChildren) {\n  let remaining = parentElements.childNodes.length;\n  if (oldChildren.length !== remaining) {\n    console.warn(\n      \"ZLIQ: Something other then ZLIQ has manipulated the children of the element\",\n      parentElements,\n      \". This can lead to sideffects. Consider using the 'isolated' attribute for this element to prevent updates.\"\n    );\n  }\n\n  for (; remaining > newChildren.length; remaining--) {\n    let childToRemove = parentElements.childNodes[remaining - 1];\n    parentElements.removeChild(childToRemove);\n\n    if (oldChildren.length < remaining) {\n      continue;\n    } else {\n      let { cycle } = oldChildren[remaining - 1];\n\n      triggerLifecycle(childToRemove, { cycle }, \"removed\");\n    }\n  }\n}\n\nfunction updateExistingNodes(\n  parentElement,\n  newChildren,\n  oldChildren,\n  cacheContainer\n) {\n  let nodes = parentElement.childNodes;\n  for (let i = 0; i < nodes.length && i < newChildren.length; i++) {\n    diff(nodes[i], newChildren[i], oldChildren[i], cacheContainer);\n  }\n}\n\nfunction addNewNodes(parentElement, newChildren, cacheContainer) {\n  for (let i = parentElement.childNodes.length; i < newChildren.length; i++) {\n    let { tag, props, children, version } = newChildren[i];\n    let newElement = createNode(tag, children);\n\n    parentElement.appendChild(newElement);\n\n    diff(newElement, newChildren[i], {}, cacheContainer);\n\n    if (props && props.cycle && props.cycle.mounted && !props.id) {\n      console.error(\n        \"The 'mounted' lifecycle event is only called on elements with id. As elements are updated in place, it is hard to define when a normal element is mounted.\"\n      );\n    }\n  }\n}\n\nfunction diffAttributes(element, props, oldProps = {}) {\n  if (props !== undefined) {\n    Object.keys(props).map(function applyPropertyToElement(attribute) {\n      applyAttribute(element, attribute, props[attribute]);\n    });\n    Object.keys(oldProps).map(function removeNotNeededAttributes(oldAttribute) {\n      if (props[oldAttribute] === undefined) {\n        element.removeAttribute(oldAttribute);\n      }\n    });\n  }\n}\n\nfunction applyAttribute(element, attribute, value) {\n  if (attribute === \"class\") {\n    element.className = value || \"\"; // \"\" in the case of a class stream returning null\n    // we leave the possibility to define styles as strings\n    // but we allow styles to be defined as an object\n  } else if (attribute === \"style\" && typeof value !== \"string\") {\n    const cssText = value\n      ? Object.keys(value)\n          .map(key => key + \":\" + value[key] + \";\")\n          .join(\" \")\n      : \"\";\n    element.style.cssText = cssText;\n    // other propertys are just added as is to the DOM\n  } else {\n    // also remove attributes on null to allow better handling of streams\n    // streams don't emit on undefined\n    if (value === null) {\n      element[attribute] = undefined;\n    } else {\n      // element.setAttribute(attribute, value);\n      element[attribute] = value;\n    }\n  }\n}\n\nfunction diffChildren(element, newChildren, oldChildren = [], cacheContainer) {\n  if (newChildren.length === 0 && oldChildren.length === 0) {\n    return;\n  }\n\n  let oldChildNodes = element.childNodes;\n  let unifiedNewChildren = unifyChildren(newChildren);\n  let unifiedOldChildren = unifyChildren(oldChildren);\n\n  updateExistingNodes(\n    element,\n    unifiedNewChildren,\n    unifiedOldChildren,\n    cacheContainer\n  );\n  removeNotNeededNodes(element, unifiedNewChildren, oldChildren);\n  addNewNodes(element, unifiedNewChildren, cacheContainer);\n}\n\n/* HELPERS */\n\n/*\n* jsx has children mixed as vdom-elements and numbers or strings\n* to consistently treat these children similar in the code we transform those numbers and strings\n* into vdom-elements with the tag #text that have one child with their value\n*/\nfunction unifyChildren(children) {\n  return children.map(child => {\n    // if there is no tag we assume it's a number or a string\n    if (!isStream(child) && child.tag === undefined) {\n      return {\n        tag: TEXT_NODE,\n        children: [child],\n        version: 0\n      };\n    } else {\n      return child;\n    }\n  });\n}\n\n// create text_nodes from numbers or strings\n// create domNodes from regular vdom descriptions\nexport function createNode(tag, children) {\n  if (tag === TEXT_NODE) {\n    return document.createTextNode(children[0]);\n  } else {\n    return document.createElement(tag);\n  }\n}\n\n// to not mutate the representation of our children from the last iteration we clone them\n// we copy the cycle functions for each element, as JSON parse/stringify does not work for functions\nfunction copyChildren(oldChildren) {\n  let newChildren = JSON.parse(JSON.stringify(oldChildren));\n  newChildren.forEach((child, index) => {\n    let oldChild = oldChildren[index];\n    if (oldChild.props && oldChild.props.cycle) {\n      child.cycle = oldChild.props.cycle;\n    }\n\n    if (typeof oldChildren[index] === \"object\") {\n      child.children = copyChildren(oldChild.children);\n    }\n  });\n  return newChildren;\n}\n\n// shorthand to call a cycle event for an element if existing\nfunction triggerLifecycle(element, { cycle } = {}, event) {\n  if (cycle && cycle[event]) {\n    cycle[event](element);\n  }\n}\n\nfunction nodeTypeDiffers(element, tag) {\n  return element.nodeName.toLowerCase() !== tag;\n}\n\nfunction isTextNode(element) {\n  return element instanceof window.Text;\n}\n\nfunction updateTextNode(element, value) {\n  if (element.nodeValue !== value) {\n    element.nodeValue = value;\n  }\n}\n\n// we want to recycle elements to save time on creating and inserting nodes into the dom\n// we don't want to manipulate elements that go into the cache, because they would mutate in the cache as well\nfunction shouldRecycleElement(oldElement, props, tag) {\n  return (\n    !isTextNode(oldElement) &&\n    oldElement.id === \"\" &&\n    !nodeTypeDiffers(oldElement, tag)\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/streamy-dom.js","import { merge$, isStream } from \"./streamy\";\nimport { resolve$, flatten } from \"./streamy-helpers\";\n\n/*\n* wrap hyperscript elements in reactive streams dependent on their children streams\n* the hyperscript function returns a constructor so we can pass down globals from the renderer to the components\n*/\nexport const h = (hyperscriptTag, props, ...children) => {\n  props = props ? props : {};\n\n  let elementConstructor = globals => {\n    let version = -1;\n\n    let constructedChildren = resolveChildren(children, globals);\n    let mergedChildren$ = mergeChildren$(constructedChildren);\n    // jsx usually resolves known tags as strings and unknown tags as functions\n    // if it is a function it is treated as a component and will resolve it\n    // props are not automatically resolved\n    if (typeof hyperscriptTag === \"function\") {\n      // TODO refactor component resolution\n      let output = hyperscriptTag(props, mergedChildren$, globals);\n\n      if (Array.isArray(output)) {\n        return resolveChildren(output, globals);\n      }\n      if (output.IS_ELEMENT_CONSTRUCTOR || isStream(output)) {\n        return resolveChild(output, globals);\n      }\n\n      // allow simple component that receives resolved streams\n      return merge$([resolve$(props), mergedChildren$.map(flatten)])\n        .map(([props, children]) => output(props, children, globals))\n        .map(children => resolveChildren(children, globals));\n    }\n\n    let { tag, classes, id } = resolveTag(hyperscriptTag);\n    props = mergeHyperscript(props, id, classes);\n\n    return merge$([resolve$(props), mergedChildren$.map(flatten)]).map(\n      ([props, children]) => {\n        return {\n          tag,\n          props,\n          children,\n          version: ++version\n        };\n      }\n    );\n  };\n  elementConstructor.IS_ELEMENT_CONSTRUCTOR = true;\n\n  return elementConstructor;\n};\n\n/*\n* wrap all children in streams and merge those\n* we make sure that all children streams are flat arrays to make processing uniform\n* input: [stream]\n* output: stream([])\n*/\nfunction mergeChildren$(children) {\n  if (!Array.isArray(children)) {\n    children = [children];\n  }\n  children = flatten(children).filter(_ => _ !== null);\n  let childrenVdom$arr = children.map(child => {\n    if (isStream(child)) {\n      return child.flatMap(mergeChildren$);\n    }\n    return child;\n  });\n\n  return merge$(childrenVdom$arr);\n}\n\n/*\n* children can be nested arrays, nested streams and element contstructors\n* this function unifies them into the format [string|number|vdom|stream<string|number|vdom>]\n*/\nfunction resolveChildren(children, globals) {\n  if (!Array.isArray(children)) {\n    children = [].concat(children);\n  }\n  let resolvedChilden = children.map(child => {\n    if (Array.isArray(child)) {\n      return resolveChildren(child, globals);\n    }\n    return resolveChild(child, globals);\n  });\n  return flatten(resolvedChilden);\n}\n\n/*\n* resolve the element constructor, also for elements nested in streams\n* returns the format string|number|vdom|stream<string|number|vdom>\n*/\nfunction resolveChild(child, globals) {\n  if (typeof child !== \"function\") {\n    return child;\n  }\n  if (child.IS_ELEMENT_CONSTRUCTOR) {\n    return child(globals);\n  }\n  if (isStream(child)) {\n    return child.map(x => resolveChildren(x, globals));\n  }\n}\n\n/*\n* extract tag classes and ids from a hyperscript selector ala div.class#id\n*/\nexport function resolveTag(hyperscriptTag) {\n  let id;\n  let classes = [];\n  let tag;\n  while (hyperscriptTag.length > 0) {\n    let end = indexOfRegex(hyperscriptTag.substr(1), /[\\.#]/); // ignore first\n    end = end === -1 ? hyperscriptTag.length : end + 1; // add the first position to the length again we ignored one row above\n    if (hyperscriptTag.startsWith(\".\")) {\n      classes.push(hyperscriptTag.slice(1, end));\n    } else if (hyperscriptTag.startsWith(\"#\")) {\n      if (id)\n        throw Error(\"You have set two ids in the selector \" + hyperscriptTag);\n      id = hyperscriptTag.slice(1, end);\n    } else {\n      tag = hyperscriptTag.slice(0, end);\n    }\n    hyperscriptTag = hyperscriptTag.slice(end);\n  }\n\n  return { id, classes, tag: tag || \"div\" };\n}\n\n// add id and classes extracted from hyperscript to the properties\nfunction mergeHyperscript(props, id, classes) {\n  if (!id && !classes) return props;\n  props = props ? props : {};\n\n  // add id\n  if (props.id && id)\n    throw Error(`You defined two ids [${props.id},${id}] on one element.`);\n  if (id) props.id = id;\n\n  // add classes\n  if (classes.length > 0) {\n    if (props.class)\n      props.class = merge$([props.class, classes.join(\" \")]).map(classResults =>\n        classResults.join(\" \")\n      );\n    else props.class = classes.join(\" \");\n  }\n\n  return props;\n}\n\n// find first position of a regex in a string\nfunction indexOfRegex(string, regex) {\n  var match = string.match(regex);\n  return match ? string.indexOf(match[0]) : -1;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/streamy-hyperscript.js"],"sourceRoot":""}